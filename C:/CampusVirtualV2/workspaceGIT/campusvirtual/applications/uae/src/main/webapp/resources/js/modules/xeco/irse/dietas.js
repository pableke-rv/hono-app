function IrseDietas(){const i=this,r={dias:0,impMax:0,reducido:0,percibir:0},t={f1:i18n.fmtDate,f2:i18n.fmtDate,imp1:i18n.isoFloat1,imp2:i18n.isoFloat,impMax:i18n.isoFloat,maxDietas:i18n.isoFloat1,reducido:i18n.isoFloat,percibir:i18n.isoFloat,dietas:(i,e,a)=>{let t="";for(let i=0;i<=e.maxDietas;i+=.5)t+='<option value="'+i+(e.imp1==i?'" selected>':'">')+i18n.isoFloat1(i)+"</option>";return t}};var o;this.getImpMax=()=>r.impMax,this.getImpReducido=()=>r.reducido,this.getImpPercibir=()=>r.percibir,this.init=()=>(o=ab.parse(dom.getText("#dietas-data"))||[],i),this.render=()=>(dom.onChangeTable("#manutenciones",i=>{var e=r.row,a=r.data;a.imp1=+r.element.value,dom.tfoot(i,r,t).setText(e.cells[9],i18n.isoFloat(a.reducido)+" €").setText(e.cells[10],i18n.isoFloat(a.percibir)+" €").setHtml("#imp-dietas",i18n.isoFloat(r.percibir)+" €").setValue("#gastos-dietas",JSON.stringify(o))}).onRenderTable("#manutenciones",i=>{var e=ab.size(o);if(0!=e){var a=o[0];if(a.maxDietas=a.estado/2,a.impMax=a.imp2*a.maxDietas,1==a.maxDietas?a.reducido=(1-a.imp1)*a.imp2:a.reducido=a.imp1?0:a.impMax,a.percibir=a.impMax-a.reducido,a.periodo=i18n.get("firstDay"),r.dias=1,r.impMax=a.impMax,r.reducido=a.reducido,r.percibir=a.percibir,1!=e){e--;for(let i=1;i<e;i++){var t=o[i];t.periodo=i18n.get("medDay"),t.impMax=t.num*t.imp2,t.reducido=(t.num-t.imp1)*t.imp2,t.percibir=t.impMax-t.reducido,t.maxDietas=t.num,r.dias+=t.num,r.impMax+=t.impMax,r.reducido+=t.reducido,r.percibir+=t.percibir}0<e&&((a=ab.last(o)).maxDietas=a.estado/2,a.impMax=a.imp2*a.maxDietas,a.reducido=a.imp1?0:a.impMax,a.percibir=a.impMax-a.reducido,a.periodo=i18n.get("lastDay"),r.dias++,r.impMax+=a.impMax,r.reducido+=a.reducido,r.percibir+=a.percibir)}}}),dom.table("#manutenciones",o,r,t).setHtml("#imp-dietas",i18n.isoFloat(r.percibir)+" €"),i)}export default new IrseDietas;