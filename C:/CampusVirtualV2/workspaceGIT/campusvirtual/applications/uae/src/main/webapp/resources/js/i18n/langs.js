import en from"./langs/en/lang.js";import es from"./langs/es/lang.js";import sb from"../components/StringBox.js";const isnum=t=>"number"==typeof t||t instanceof Number,round=(t,s)=>+(Math.round(t+"e+"+s)+"e-"+s);function Langs(){const i=this;let n={en:en,es:es},o=en;this.getLangs=()=>n,this.getLang=()=>o,this.getCurrent=()=>o,this.getI18n=t=>n[t]||n[sb.substring(t,0,2)]||o,this.setLang=t=>(o=i.getI18n(t),i),this.addLang=function(t,s){return Object.assign(n[t],s),i},this.getDefault=()=>"en",this.getIsoLang=()=>o.lang,this.getIsoLangs=()=>Object.keys(n),this.getNavLang=()=>navigator.language||navigator.userLanguage,this.getLanguage=()=>document.documentElement.getAttribute("lang")||i.getNavLang()||"en",this.getAcceptLanguage=t=>i.setLang(sb.substring(t,0,5)).getIsoLang(),this.setLanguage=()=>i.setLang(i.getLanguage()),this.getValidation=()=>o.validators,this.getValidators=()=>o.validators.reset(),this.resetValidators=t=>i.setLang(t).getValidators(),this.createValidators=t=>i.setLang(t).getLang().createValidators(),this.get=t=>o[t]||t||"",this.getItem=(t,s)=>o[t][s],this.confirm=t=>!t||confirm(i.get(t)),this.set=(t,s)=>(o[t]=s,i),n.en.isoDate=t=>t&&t.substring(0,10),n.es.isoDate=t=>t&&t.substring(8,10)+"/"+t.substring(5,7)+"/"+t.substring(0,4),this.enDate=n.en.isoDate,this.isoTime=t=>t&&t.substring(11,19),this.isoTimeShort=t=>t&&t.substring(11,16),this.isoDate=t=>o.isoDate(t),this.isoDateTime=t=>i.isoDate(t)+" "+i.isoTime(t);const s=["1","true","yes","on"],e=(this.boolval=t=>globalThis.isset(t)?o.msgBool[+s.includes(""+t)]:null,this.strval=(t,s)=>t[s+"_"+o.lang]||t[s],{minimumFractionDigits:2});function a(t,s){var n,e;return!t||(s=t.lastIndexOf(s),n="-"==t.charAt(0)?"-":"",e=s<0?t:t.substr(0,s),t=s<0?"":"."+t.substr(s+1),s=parseFloat(n+e.replace(/\D+/g,"")+t),isNaN(s))?null:s}function r(t,s){return isnum(t)?round(t,s??2).toLocaleString(o.lang,e):null}function g(t,s,n){return r(a(t,s),n)}function u(t){var s;return!t||(s="-"==t.charAt(0)?"-":"",s=parseInt(s+t.replace(/\D+/g,"")),isNaN(s))?null:s}function l(t){return isnum(t)?t.toLocaleString(o.lang):null}n.en.isoFloat=r,n.en.toFloat=t=>a(t,"."),n.en.fmtFloat=(t,s)=>g(t,".",s),n.es.isoFloat=r,n.es.toFloat=t=>a(t,","),n.es.fmtFloat=(t,s)=>g(t,",",s),this.toFloat=t=>o.toFloat(t),this.isoFloat=t=>o.isoFloat(t),this.isoFloat2=t=>o.isoFloat(t),this.isoFloat3=t=>o.isoFloat(t,3),this.fmtFloat=t=>o.fmtFloat(t),this.fmtFloat2=t=>o.fmtFloat(t),this.fmtFloat3=t=>o.fmtFloat(t,3),this.toInt=u,this.isoInt=l,this.fmtInt=function(t){return l(u(t))},Number.isNumber=isnum,Number.prototype.mask=function(t){return this>>t&1},Number.prototype.bitor=function(t){return 0<(this&t)},Number.prototype.bitand=function(t){return(this&t)==t},Number.prototype.round=function(t){return round(this,t??2)},globalThis.isnum=isnum,globalThis.dec=(t,s)=>(s??0)<t?t--:t,globalThis.inc=(t,s)=>t<s?t++:t;const h={},m=/[@$](\w+)(\.\w+)?;/g;this.render=function(t,e,s,n){return t&&(s=s||0,h.index=s,h.count=s+1,h.size=n||1,e=e||o,t.replace(m,(t,s,n)=>t.startsWith("$")||".f"==n?i.isoFloat(e[s]):".d"==n?i.isoDate(e[s]):e[s]??h[s]??""))}}export default new Langs;