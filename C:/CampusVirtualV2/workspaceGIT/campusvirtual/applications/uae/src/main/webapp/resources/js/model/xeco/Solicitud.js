import i18n from"../../i18n/langs.js";function Firma(i){const s=this;let t;this.getData=()=>t,this.setData=i=>(t=i,s),this.isPrincipal=i=>2&i,this.isAceptada=i=>32&i,this.isRechazada=(i,t)=>!s.isAceptada(i)&&t,this.isFirmable=i=>64&i,this.myFlag=(i,t)=>s.isAceptada(i)||s.isRechazada(i,t)?'<i class="fas fa-flag fa-lg icon icon-green" title="Solicitud firmada"></i>':'<i class="fas fa-flag fa-lg icon icon-warn" title="Solicitud pendiente de firma"></i>'}function Firmas(i){const t=this,s=new Firma(i);let e;this.getData=()=>e,this.setData=i=>(e=i,t),this.getFirma=()=>s,this.getPrincipales=()=>e.filter(i=>s.isFirmable(i.mask))}function Solicitud(){const s=this,i=new Firmas(s),t=i.getFirma(),e=["text-warn","text-green","text-error","text-green","text-green","text-warn","text-warn","text-error","text-error","text-error","text-error"];let a,r,h;this.getData=()=>a,this.get=i=>a[i],this.setData=i=>(a=i,s),this.set=(i,t)=>(a[i]=t,s),this.getNif=()=>r,this.setNif=i=>(r=i,s),this.isAdmin=()=>"23024374V"==r,this.isUsuEc=()=>!!h,this.isUxxiec=s.isUsuEc,this.setGrupo=i=>(h=i,s),this.setUser=i=>s.setNif(i.nif).setGrupo(i.grupo),this.getFirmas=()=>i,this.getFirma=()=>t,this.getTipo=()=>a.tipo,this.getSubtipo=()=>a.subtipo,this.setSubtipo=function(i){return a.subtipo=i,this},this.getEstado=()=>a.estado,this.isPendiente=()=>5==a.estado,this.isAceptada=()=>1==a.estado,this.isRechazada=()=>2==a.estado,this.isFinalizada=()=>[1,3,4,9,10].includes(a.estado),this.isUae=()=>"2"==h,this.isOtri=()=>"8"==h||"286"==h||"134"==h||"284"==h,this.isDisabled=()=>a.id,this.isEditable=()=>!a.id,this.isFirmable=()=>s.isPendiente()&&t.isFirmable(a.fmask),this.isRechazable=()=>a.id&&(s.isUae()||s.isFirmable()),this.isEditableUae=()=>s.isEditable()||s.isUae()&&s.isFirmable(),this.isEjecutable=()=>s.isUae()&&s.isFinalizada(),this.isIntegrable=()=>s.isUae()&&s.isFinalizada(),this.isUrgente=()=>a.fMax&&a.extra,this.getDescEstado=()=>i18n.getItem("descEstados",a.estado),this.getStyleByEstado=()=>e[a.estado]||"text-warn",this.validate=()=>i18n.getValidators(),this.validateReject=i=>{return i18n.getValidators().size("rechazo",i.rechazo).catch("Debe indicar un motivo para el rechazo de la solicitud.")}}export default new Solicitud;