import alerts from"./Alerts.js";import coll from"./CollectionHTML.js";const PARAMS=[];function param(e,n){return PARAMS.splice(0,PARAMS.length,{name:e,value:n}),PARAMS}function params(e){PARAMS.splice(0,PARAMS.length);for(const n in e)PARAMS.push({name:n,value:e[n]});return PARAMS}function send(e,n){alerts.loading(),(0,window[e])(n)}function sendId(e,n){send(e,param("id",n))}function sendTerm(e,n){send(e,param("term",n))}function sendIndex(e,n){send(e,param("i",n))}function fetch(e,n){send(e,params(n))}function isLoaded(e,n,s){return e&&"success"==n||!alerts.showError(e||"Error 500: Internal server error.").working()}function showAlerts(e,n,s){return!!isLoaded(e,n,s)&&(e=s.msgs&&JSON.parse(s.msgs),alerts.showAlerts(e),!e?.msgError)}function datalist(e,n,s,r){const a=(r=r||{}).onChange||globalThis.void,t=r.onReset||globalThis.void;return s=e.getInput(s),r.onChange=e=>{s.value=e.value??e,a(e)},r.onReset=()=>{s.value="",t()},e.setDatalist(n,r)}function uploads(e){e.setClick(e=>{const s=e.target.parentNode;s.querySelector("[type='file']").onchange=e=>{var n=s.querySelector(".filename");n&&(n.innerHTML=e.target.files[0]?.name||"")},s.querySelector(".ui-fileupload-choose").click()})}export default{param:param,params:params,send:send,sendId:sendId,sendTerm:sendTerm,sendIndex:sendIndex,fetch:fetch,ready:coll.ready,isLoaded:isLoaded,showAlerts:showAlerts,datalist:datalist,uploads:uploads};