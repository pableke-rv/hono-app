function ArrayBox(){const n=this,r=(t,i)=>t[i],s=t=>t?t.length:0;function o(i,r,e,n){let s=0;for(let t=0;t<e.length&&0==s;t++){var o=e[t];s="desc"==n[t]?o(r,i):o(i,r)}return s}Array.prototype.update=function(i){for(let t=0;t<this.length;t++)this[t]=i(this[t],t);return this},Array.prototype.remove=function(t){t=this.findIndex(t);return t<0||this.splice(t,1),this},Array.prototype.swap=function(t,i){var r=this[t];return this[t]=this[i],this[i]=r,this},Array.prototype.stringify=function(t,i,r){t=t??",";let e=(i=i||0)<(r=r<0?this.length+r:r||this.length)?""+this[i++]:"";for(;i<r;)e+=t+this[i++];return e},Array.prototype.format=function(t,s){const o=(s=s||{}).empty||"",h=s.getValue||r,f={size:this.length};let i="";return this.forEach((e,n)=>{f.index=n,f.count=n+1,i+=t.format((t,i)=>{var r=s[i];return(r?r(e[i],e,n):h(e,i)??f[i])??o})}),i},this.size=s,this.empty=t=>s(t)<1,this.swap=(t,i,r)=>(t&&t.swap(i,r),n),this.mod=(t,i)=>t?t[i%t.length]:null,this.each=function(i,r){var e=s(i);for(let t=0;t<e;t++)r(i[t],t,i);return n},this.reverse=function(i,r){for(let t=s(i)-1;-1<t;t--)r(i[t],t,i);return n},this.find=function(i,r){var e=s(i);for(let t=0;t<e;t++)if(r(i[t],t,i))return i[t];return null},this.findIndex=function(i,r){var e=s(i);for(let t=0;t<e;t++)if(r(i[t],t,i))return t;return-1},this.every=function(t,i){for(var r=s(t),e=0;e<r;e++)e=i(t[e],e)?e:r;return e==r},this.some=(t,i)=>-1<n.findIndex(t,i),this.indexOf=(t,i)=>t?t.indexOf(i):-1,this.intersect=(t,i)=>i?t.filter(t=>-1<i.indexOf(t)):[],this.shuffle=t=>t.sort(()=>.5-Math.random()),this.unique=(i,t)=>t?i.concat(t.filter(t=>i.indexOf(t)<0)):i,this.distinct=(r,e)=>e?r.filter((i,t)=>r.findIndex(t=>i[e]===t[e])==t):r,this.eq=(t,r)=>t&&r&&t.every((t,i)=>r[i]==t),this.push=(t,i)=>(t&&t.push(i),n),this.pop=t=>(t&&t.pop(),n),this.remove=(t,i)=>(t&&t.remove(i),n),this.reset=t=>(t&&t.splice(0),n),this.get=(t,i)=>t?t[i]:null,this.last=t=>n.get(t,s(t)-1),this.clone=t=>t?t.slice():[],this.sort=function(t,i,r){return t.sort("desc"==i?(t,i)=>r(i,t):r),n},this.multisort=function(t,r,e){return e=e||[],t.sort((t,i)=>o(t,i,r,e)),n},this.cmp=function(t,i,r,e){return o(t,i,r,e||[])},this.toObject=function(t,r,e){return e=e||{},t.forEach((t,i)=>{e[t]=r[i]}),e},this.merge=this.toObject,this.copy=function(i,t){let r={};return t.forEach(t=>{r[t]=i[t]}),r},this.assign=this.copy,this.flush=function(t,i){let r=Object.assign({},t);return i.forEach(t=>{delete r[t]}),r},this.clean=this.flush,this.clear=function(t){for(var i in t)delete t[i];return t},this.stringify=(t,i,r,e)=>t.stringify(i,r,e),this.format=(t,i,r)=>t.format(i,r),this.parse=(t,i)=>t?JSON.parse(t,i):null,this.read=(t,i)=>n.parse(window.sessionStorage.getItem(t),i),this.stringify=t=>{return"string"==typeof(i=t)||i instanceof String?t:JSON.stringify(t);var i},this.ss=function(t,i){return i&&window.sessionStorage.setItem(t,n.stringify(i)),n},this.ls=function(t,i){return i&&window.localStorage.setItem(t,n.stringify(i)),n}}
function DateBox(){const u=this,a=new Date,i=[31,28,31,30,31,30,31,31,30,31,30,31],n=t=>t<10?"0"+t:t,r=(t,e,i)=>Math.min(Math.max(t||0,e),i),g=t=>r(t,0,59),s=t=>0==(3&t)&&(t%25!=0||0==(15&t)),h=t=>t&&t.getTime&&!isNaN(t.getTime());function o(t,e,i,s,n){return t.setHours(r(e,0,23),g(i),g(s),n||0),isNaN(t.getTime())?null:t}function e(t,e,i,s,n,a,r){var g=new Date;return g.setFullYear(t,e-1,i),o(g,s,n,a,r)}function l(t,e,i){return e=(h(e)?e:t).getTime(),i=(h(i)?i:t).getTime(),e<=t.getTime()&&t.getTime()<=i}this.isValid=h,this.sysdate=()=>a,this.toDate=t=>t?new Date(t):null,this.isLeap=t=>t&&s(t.getFullYear()),this.getDays=(t,e)=>Math.round(Math.abs((t-e)/864e5)),this.daysInMonth=t=>{return t?(e=t.getFullYear(),t=t.getMonth(),i[t]+(1==t&&s(e))):0;var e},this.toArray=t=>t?[t.getFullYear(),t.getMonth()+1,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()]:[],this.reset=t=>(t?t.setFullYear(a.getFullYear(),a.getMonth(),a.getDate()):a.setTime(Date.now()),u),this.addDate=function(t,e){return t&&t.setDate(t.getDate()+e),u},this.addHours=function(t,e){return t&&t.setHours(t.getHours()+e),u},this.addMs=function(t,e){return t&&t.setMilliseconds(t.getMilliseconds()+e),u},this.toISODateString=t=>(t||a).toISOString().substring(0,10),this.trunc=function(t){return t&&t.setHours(0,0,0,0),u},this.endDay=function(t){return t&&t.setHours(23,59,59,999),u},this.randTime=(t,e)=>Math.floor(Math.random()*u.diffDate(e,t)+t.getTime()),this.randDate=(t,e)=>new Date(u.randTime(t,e)),this.rand=()=>u.randDate(new Date(a.getTime()-2592e6),a),this.clone=t=>new Date((t||a).getTime()),this.build=t=>{return t&&e(+(t=t.split(/\D+/))[0],+t[1],+t[2],+t[3]||0,+t[4]||0,+t[5]||0,+t[6]||0)},this.getWeek=function(t){t=t||a;var e=new Date(t.getFullYear(),0,1);return Math.ceil((t.getDay()+1+u.getDays(t,e))/7)},this.week=function(t,e){e=e||1;var t=new Date(t,0,1),i=(t.getDay()+6)%7;return t.setDate(t.getDate()+7*e-i),t},this.toWeek=t=>t?u.week(+t.substr(0,4),+t.substr(6)):null,this.isoWeek=t=>t?t.getFullYear()+"-W"+n(u.getWeek(t)):null,this.toObject=function(t,e){var i=(t=t||a).getDay(),s=t.getFullYear().toString(),s={yyyy:+s,y:+s.substr(0,2),yy:+s.substr(2,2),m:t.getMonth(),d:t.getDate()};return s.mmm=e.monthNamesShort[s.m],s.mmmm=e.monthNames[s.m],s.mm=n(++s.m),s.ddd=e.dayNamesShort[i],s.dddd=e.dayNames[i],s.dd=n(s.d),s.h=t.getHours(),s.hh=n(s.h),s.M=t.getMinutes(),s.MM=n(s.M),s.s=t.getSeconds(),s.ss=n(s.s),s.ms=t.getMilliseconds(),s.t=s.h<12?"a":"p",s.tt=s.t+"m",s},this.diff=function(t,e){if((e=e||a)<t)return u.diff(e,t);const s=u.toArray(e);const n=[0,12,u.daysInMonth(e)-e.getDate()+t.getDate(),24,60,60,1e3];return u.toArray(t).forEach(function t(e,i){s[i]-=e,s[i]<0&&(s[i]+=n[i],t(1,i-1))}),s},this.interval=function(t,e,i,s,n){let a=u.clone(t);n=n||1e3;const r=new Date(a.getTime()+e),g=setInterval(function(){u.addMs(a,n),(!i(a,r)||r<=a)&&(clearInterval(g),s)&&s()},n);return u},this.lt=(t,e)=>h(t)&&h(e)&&t.getTime()<e.getTime(),this.le=(t,e)=>h(t)&&h(e)&&t.getTime()<=e.getTime(),this.eq=(t,e)=>h(t)&&h(e)&&t.getTime()==e.getTime(),this.ge=(t,e)=>h(t)&&h(e)&&t.getTime()>=e.getTime(),this.gt=(t,e)=>h(t)&&h(e)&&t.getTime()>e.getTime(),this.multicmp=t=>t.map(i=>(t,e)=>u.cmp(t[i],e[i])),this.diffDate=(t,e)=>t.getTime()-e.getTime(),this.cmp=function(t,e){return t&&e?u.diffDate(t,e):t?-1:1},this.inYear=(t,e)=>h(t)&&h(e)&&t.getFullYear()==e.getFullYear(),this.inMonth=(t,e)=>u.inYear(t,e)&&t.getMonth()==e.getMonth(),this.inDay=(t,e)=>u.inMonth(t,e)&&t.getDate()==e.getDate(),this.inHour=(t,e)=>u.inDay(t,e)&&t.getHours()==e.getHours(),this.geToday=t=>u.inDay(t,a)||u.ge(t,a),this.future=t=>u.gt(t,a),this.past=t=>u.lt(t,a),this.in=(t,e,i)=>!h(t)||l(t,e,i),this.between=(t,e,i)=>h(t)&&l(t,e,i);const d=t=>n(t.getHours())+":"+n(t.getMinutes()),m=t=>d(t)+":"+n(t.getSeconds()),D=(this.minTime=t=>t?d(t):null,this.isoTime=t=>t?m(t):null,this.acTime=t=>t&&t.replace(/(\d\d)(\d+)$/g,"$1:$2").replace(/[^\d\:]/g,""),this.toTime=function(t){t=t&&t.split(/\D+/);return t?o(new Date,t[0],t[1],t[2],t[3]):null},this.fmtMinTime=t=>t&&t.substr(11,5),this.fmtTime=t=>t&&t.substr(11,8),t=>t.getFullYear()+"-"+n(t.getMonth()+1)+"-"+n(t.getDate())),c=(this.enDate=t=>t?e(t.substring(0,4),t.substring(5,7),t.substring(8,10)):null,this.isoEnDate=t=>h(t)?D(t):null,this.isoEnDateTime=t=>h(t)?D(t)+" "+m(t):null,this.fmtEnDate=t=>t&&t.substr(0,10),this.acEnDate=t=>t&&t.replace(/^(\d{4})(\d+)$/g,"$1-$2").replace(/^(\d{4}\-\d\d)(\d+)$/g,"$1-$2").replace(/[^\d\-]/g,""),t=>n(t.getDate())+"/"+n(t.getMonth()+1)+"/"+t.getFullYear());this.esDate=t=>t?e(t.substring(6,10),t.substring(3,5),t.substring(0,2)):null,this.isoEsDate=t=>h(t)?c(t):null,this.isoEsDateTime=t=>h(t)?c(t)+" "+m(t):null,this.fmtEsDate=t=>t&&t.substring(8,10)+"/"+t.substring(5,7)+"/"+t.substring(0,4),this.acEsDate=t=>t&&t.replace(/^(\d\d)(\d+)$/g,"$1/$2").replace(/^(\d\d\/\d\d)(\d+)$/g,"$1/$2").replace(/[^\d\/]/g,""),Date.prototype.toJSON=function(){return D(this)+"T"+m(this)+"."+this.getMilliseconds()}}
function DomBox(e){const k=this,n="",s=document.createElement("div"),c=document.createElement("textarea"),h={classHide:"hide",classAlerts:"alerts",classAlertText:"alert-text",classAlertClose:"alert-close",classInputError:"ui-error",classTipError:"ui-errtip",classCheckList:"check-list",classCheckGroup:"check-group"},d=(Object.assign(h,e),"."+h.classTipError),u="."+h.classCheckList,g="."+h.classCheckGroup,a=()=>k,i=e=>e,r=e=>console.log("Log:",e),o=e=>e?e.split(/\s+/):[],l=(e,t)=>sb.isstr(e)?k.get(e,t):e,p=e=>sb.isstr(e)?document.querySelectorAll(e):e,m=(this.get=(e,t)=>(t||document).querySelector(e),this.getAll=(e,t)=>(t||document).querySelectorAll(e),this.closest=(e,t)=>t&&t.closest(e),this.getNavLang=()=>navigator.language||navigator.userLanguage,this.getLang=()=>document.documentElement.getAttribute("lang")||k.getNavLang(),this.redir=(e,t)=>(e&&window.open(e,t||"_blank"),k),this.unescape=e=>(c.innerHTML=e,c.value),this.escape=e=>(s.innerHTML=e,s.innerHTML),this.scroll=function(e,t){return t=t||window,(e=e||t.document.body).scrollIntoView({behavior:"smooth"}),k},this.fetch=function(t){return(t=t||{}).headers=t.headers||{},t.reject=t.reject||r,t.resolve=t.resolve||r,t.headers["x-requested-with"]="XMLHttpRequest",t.headers.Authorization="Bearer "+window.localStorage.getItem("jwt"),window.fetch(t.action,t).then(e=>{return(-1<(e.headers.get("content-type")||n).indexOf("application/json")?e.json():e.text()).then(e.ok?t.resolve:t.reject)})},this.copyToClipboard=function(e){return c.value=e,c.select(),document.execCommand("copy"),k},(e,t)=>a(ab.each(e,t))),y=(this.each=function(e,t){return e&&(1==e.nodeType?t(e):m(p(e),t)),k},this.reverse=(e,t)=>(ab.reverse(e,t),k),this.indexOf=(t,e)=>ab.findIndex(e||t.parentNode.children,e=>t==e),this.findIndex=(t,e)=>ab.findIndex(e,e=>e.matches(t)),this.find=(t,e)=>ab.find(e,e=>e.matches(t)),this.toArray=e=>[...p(e)],this.filter=(t,e)=>[...e].filter(e=>e.matches(t)),this.apply=(s,e,r)=>m(e,(e,t)=>e.matches(s)&&r(e,t)),this.sort=(e,t)=>k.toArray(e).sort(t),this.map=(e,t)=>k.toArray(e).map(t),this.values=e=>k.map(e,e=>e.value),this.prev=(e,t)=>{for(e=e.previousElementSibling;t&&e;){if(e.matches(t))return e;e=e.previousElementSibling}return e},this.next=(e,t)=>{for(e=e.nextElementSibling;t&&e;){if(e.matches(t))return e;e=e.nextElementSibling}return e},this.sibling=(e,t)=>k.prev(e,t)||k.next(e,t),this.children=(e,t)=>e.parentNode.querySelectorAll(t),this.eachChild=(e,t,s)=>k.apply(t,e.children,s),this.clear=e=>{for(;e.firstChild;)e.removeChild(e.firstChild);return k},"input,textarea,select"),t="[tabindex]:not([type=hidden],[readonly],[disabled])",f=e=>e.offsetWidth||e.offsetHeight||e.getClientRects().length,I=e=>f(e)&&e.matches(t);function T(e,t){return t=t??n,"SELECT"===e.tagName?e.selectedIndex=Math.max(k.findIndex("[value='"+t+"']",e.options),0):"checkbox"===e.type||"radio"===e.type?e.checked=e.value==t:e.value=t,k}function b(e){var t=k.sibling(e,y),s=k.sibling(e,d);return k.showError(i18n.getError()).setHtml(s,i18n.getMsg(e.name)).show(s).addClass(e,h.classInputError).addClass(t,h.classInputError).focus(f(e)?e:t)}function v(e,r,n){return k.closeAlerts().reverse(e,e=>{var t=r[e.name]||a,s=n[e.name]||r[e.name+"Error"];t(e.name,e.value,n.msgError,s)||b(e)}).isOk()}function w(e,t){return e.classList.toggle(h.classHide,!t),e.innerText=t,k}function A(e,t){return e.classList.toggle(h.classHide,!t),e.innerHTML=t,k}this.inputs=e=>k.getAll(y,e),this.focus=e=>(e&&e.focus(),k),this.checked=e=>k.getAll("input:checked",e),this.checks=e=>k.getAll("input[type=checkbox]",e),this.check=(e,t)=>k.each(e,e=>{e.checked=t}),this.getFormInputs=e=>k.filter(y,k.getForm(e).elements),this.binary=(e,s)=>k.each(e,(e,t)=>{e.checked=nb.mask(s,t)}),this.integer=e=>{let t="";return k.reverse(e,e=>{t+=e.checked?"1":"0"}),parseInt(t,2)},this.checkval=(e,t,s)=>(e.value=s||0,k.binary(t,e.value),e.checked=t.length==k.filter(":checked",t).length,k),this.val=(e,t)=>k.each(e,e=>T(e,t)),this.attr=(e,t,s)=>k.each(e,e=>e.setAttribute(t,s)),this.removeAttr=(e,t)=>k.each(e,e=>e.removeAttribute(t)),this.getAttr=function(e,t,s){return(e=l(e,s))&&e.getAttribute(t)},this.setAttr=function(e,t,s,r){return(e=l(e,r))&&e.setAttribute(t,s),k},this.delAttr=function(e,t,s){return(e=l(e,s))&&e.removeAttribute(t),k},this.loadInputs=(e,s,r)=>(r=r||{},k.each(e,e=>{var t=r[e.name]||i;s[e.name]=t(e.value)})),this.displayInputs=(t,s,r)=>{var e=e=>sb.substring(e,0,10);const n={datetime:i,date:e,week:e,month:e};return r=r||n,k.each(t,e=>{e.classList.contains("check-group")?k.checkval(e,k.filter(".check-group-"+e.name,t),s[e.name]):T(e,(n[e.type]||r[e.name]||i)(s[e.name]))})},this.load=(e,t,s)=>k.loadInputs(k.getFormInputs(e),t,s),this.display=(e,t,s)=>k.displayInputs(k.getFormInputs(e),t,s),this.setInputError=(e,t,s,r)=>(e=k.getInput(e))?r?r(e.name,e.value,t,s)?k:b(e):(i18n.setError(t,e.name,s),b(e)):k,this.validateInputs=(e,t,s)=>(t=t||{},(s=s||{}).msgError=s.msgError||t.msgError,v(e,t,s)),this.validate=(e,t,s)=>{t=t||{},s=s||{};var r=(e=k.getForm(e)).getAttribute("id")+"FormError";return s.msgError=s[r]||t[r]||s.msgError||t.msgError,v(k.filter(y,e.elements),t,s)},this.getText=function(e,t){return(e=l(e,t))&&e.innerText},this.setText=function(e,t,s){return(e=l(e,s))?w(e,t??n):k},this.text=function(e,t){return t=t??n,k.each(e,e=>w(e,t))},this.getHtml=function(e,t){return(e=l(e,t))&&e.innerHTML},this.setHtml=function(e,t,s){return(e=l(e,s))?A(e,t??n):k},this.html=function(e,t){return t=t??n,k.each(e,e=>A(e,t))},this.mask=(e,s,r)=>k.each(e,(e,t)=>e.classList.toggle(r,nb.mask(s,t))),this.view=(e,t)=>k.mask(e,~t,h.classHide),this.select=function(e,s){return k.each(e,e=>{var t=e.options[e.selectedIndex];k.view(e.options,s).hasClass(t,h.classHide)&&(e.selectedIndex=k.findIndex(":not(.hide)",e.options))})},this.empty=e=>!e||!e.innerHTML||e.innerHTML.trim()===n,this.add=(t,e)=>k.each(e,e=>t.appendChild(e)),this.append=function(t,e){return e=e||document.body,k.each(e,e=>{s.innerHTML=t,k.add(e,s.childNodes)})};const x={},E=(this.getTpl=e=>x[e],this.setTpl=(e,t)=>(x[e]=t,k),this.loadTemplates=()=>k.each("template[id]",e=>k.setTpl(e.id,e.innerHTML)),this.render=function(e,t){e.id=e.id||"_"+sb.rand();var s=e.dataset.tpl||e.id;return x[s]=x[s]||e.innerHTML,A(e,t(x[s]))},this.format=(e,s,r)=>{e=p(e);return s.size=e.length,ab.each(e,(e,t)=>{s.index=t,s.count=t+1,k.render(e,e=>sb.format(s,e,r))}),k},this.tr=(e,t)=>k.format(e,i18n.getLang(),t),this.replace=(e,t)=>k.each(e,e=>{e.outerHTML=t}),this.parse=(e,t)=>k.each(e,e=>{e.outerHTML=t(e.outerHTML)}),e=>e.classList.remove(h.classHide)),C=e=>e.classList.add(h.classHide),L=(this.isVisible=e=>e&&f(e),this.visible=(e,t)=>k.isVisible(l(e,t)),this.show=e=>k.each(e,E),this.hide=e=>k.each(e,C),this.hasClass=(t,e)=>t&&o(e).some(e=>t.classList.contains(e)),this.addClass=function(e,s){return s=o(s),k.each(e,t=>s.forEach(e=>t.classList.add(e)))},this.removeClass=function(e,s){return s=o(s),k.each(e,t=>s.forEach(e=>t.classList.remove(e)))},this.toggle=function(e,s,r){return s=o(s),k.each(e,t=>s.forEach(e=>t.classList.toggle(e,r)))},this.toggleHide=(e,t)=>k.toggle(e,h.classHide,t),this.toggleLink=(e,t)=>k.toggleHide(".info-"+e.id,t).setFocus(e.parentNode),this.css=function(e,t,s){const r=t.replace(/(-[a-z])/,e=>e.replace("-",n).toUpperCase());return k.each(e,e=>{e.style[r]=s})},"change"),H=(t,e,s,r,n)=>a(t.addEventListener(e,e=>r(t,e,s)||e.preventDefault(),n)),S=(e,t,s,r)=>e?H(e,t,0,s,r):k,F=(e,t,s,r)=>k.apply(e,t,(e,t)=>H(e,s,t,r));this.event=(e,t,s)=>S(l(e),t,s),this.events=(e,s,r)=>k.each(e,(e,t)=>H(e,s,t,r)),this.ready=e=>H(document,"DOMContentLoaded",0,e),this.trigger=function(e,t,s){return l(e).dispatchEvent(s?new CustomEvent(t,{detail:s}):new Event(t)),k},this.click=(e,s)=>k.each(e,(e,t)=>H(e,"click",t,s)),this.addClick=(e,t)=>S(l(e),"click",t),this.onclick=this.onClick=k.click,this.change=(e,s)=>k.each(e,(e,t)=>H(e,L,t,s)),this.onchange=this.onChange=k.change,this.keyup=(e,s)=>k.each(e,(e,t)=>H(e,"keyup",t,s)),this.onkeyup=this.onKeyup=k.keyup,this.keydown=(e,s)=>k.each(e,(e,t)=>H(e,"keydown",t,s)),this.onkeydown=this.onKeydown=k.keydown,this.submit=(e,s)=>k.each(e,(e,t)=>H(e,"submit",t,s)),this.onsubmit=this.onSubmit=k.submit,this.ready(function(){k.update=()=>{var e=k.getAll("table,"+y);s=k.filter("table",e),r=k.filter(y,e)},k.update(),k.isOk=i18n.isOk,k.isError=i18n.isError;var s,r,e=k.get("."+h.classAlerts);const t=k.getAll("."+h.classAlertText,e),n=e=>(e.parentNode.classList.remove("hide","fadeOut"),e.parentNode.classList.add("fadeIn"),k),a=e=>(e.parentNode.classList.add("fadeOut"),k),i=(e,t)=>t?n(e).setHtml(e,t).scroll():k,o=(k.showOk=e=>i(t[0],e),k.showInfo=e=>i(t[1],e),k.showWarn=e=>i(t[2],e),k.showError=e=>i(t[3],e),k.showAlerts=function(e){return e?k.showOk(e.msgOk).showInfo(e.msgInfo).showWarn(e.msgWarn).showError(e.msgError):k},k.closeAlerts=function(){i18n.start();var e=k.getAll(d);return k.each(t,a).removeClass(r,h.classInputError).html(e,"").hide(e)},k.setOk=(e,t)=>k.showOk(t).clearForm(e),k.setErrors=function(e){if(k.closeAlerts(),sb.isstr(e))return k.showError(e);for(const t in e)k.setInputError("[name='"+t+"']",null,e[t]);return k.showAlerts(e)},setTimeout(()=>k.each(t,e=>{e.firstChild&&n(e)}),1),k.click(k.getAll("."+h.classAlertClose,e),a),e.nextElementSibling);function m(e){e=e.tBodies;e[0].children.length?k.show(e[0]).hide(e[1]):k.hide(e[0]).show(e[1])}function f(e,t,s){return k.trigger(e,"render").render(e.tFoot,e=>sb.format(t,e,s))}function b(r,n,a,t){a.total=n.length,a.index=a.index||0,a.start=a.start||0,a.pageSize=a.pageSize||99,a.sortDir=r.dataset.sortDir,a.sortBy=r.dataset.sortBy,a.end=a.start+a.pageSize,a.page=a.start/a.pageSize,a.sortBy?(e=a.sort||((e,t)=>sb.cmpBy(e,t,a.sortBy)),ab.sort(n,a.sortDir,e)):(e=k.getAll(".sort",r.tHead),k.removeClass(e,"sort-asc sort-desc").addClass(e,"sort-none"));const s=a.pageSize<a.total?n.slice(a.start,a.end):n;a.size=s.length,(t=t||{}).getValue=t.getValue||i18n.val;var e=r.tBodies[0];f(r,a,t),k.render(e,e=>ab.format(s,e,t)).trigger(r,"rendered"),m(r);{var i=r,o=n,l=a,c=t;const g=k.next(i,".pagination"),p=Math.ceil(l.total/l.pageSize);if(!(l.pageSize<1)&&g){let s="";if(1<p){let e=0;d(l.page-1,"&laquo;"),1<p&&u(0),2<=(e=Math.max(l.page-3,1))&&d(e-1,"...");for(var h=Math.min(l.page+3,p-1);e<=h;)u(e++);e<p-1&&d(e,"..."),e<p&&u(p-1),d(l.page+1,"&raquo;"),g.innerHTML=s,k.click(k.getAll("a",g),e=>{l.page=sb.lastId(e.href),l.start=l.page*l.pageSize,l.end=l.start+l.pageSize,b(i,o,l,c),k.trigger(i,"pagination",l)})}else g.innerHTML=s;function d(e,t){e=nb.range(e,0,p-1),s+='<a href="#'+e+'">'+t+"</a>"}function u(e){e=nb.range(e,0,p-1),s=(s+='<a href="#'+e+'"')+(e==l.page?' class="active">':">")+(e+1)+"</a>"}}}return k.change(e.children,(e,t,s)=>{a.row=e,a.index=a.start+s,a.data=n[a.index],a.element=t.target,k.trigger(r,"change-"+t.target.name,a)}).change(r.tFoot.children,(e,t,s)=>{a.row=e,a.index=s,a.data=null,a.element=t.target,k.trigger(r,"change-"+t.target.name,a)}).click(k.getAll("a[href]",e),e=>{a.row=e.closest("tr"),a.index=a.start+k.indexOf(a.row),a.data=n[a.index];e=(a.element=e).getAttribute("href");"#remove"==e?v(r,n,a,t):sb.starts(e,"#find")&&k.trigger(r,e.substring(1),a)})}function v(e,t,s,r){return e&&t&&i18n.confirm(r?.remove||"remove")&&k.closeAlerts().trigger(e,"remove",s.data).isOk()&&(t.splice(s.index,1),s.start=1<s.size?s.start:0,b(e,t,s,r)),k}function l(e,t,s,r,n){return t.index=n,t.data=r,delete t.row,k.display(e,r,s)}k.loading=window.loading=window.MostrarProgreso=()=>(o.classList.remove("hide","fadeOut"),k.closeAlerts()),k.working=k.unloading=window.unloading=()=>(o.classList.remove("hide","fadeIn"),o.classList.add("fadeOut"),k),k.getTable=e=>sb.isstr(e)?k.find(e,s):e,k.getTables=e=>e?k.filter(e,s):s,k.getInput=e=>sb.isstr(e)?k.find(e,r):e,k.getInputs=e=>e?k.filter(e,r):r,k.eachInput=(e,t)=>k.apply(e,r,t),k.getValue=e=>(e=k.getInput(e))&&e.value,k.setValue=(e,t)=>(e=k.getInput(e))?T(e,t):k,k.values=(e,t)=>k.apply(e,r,e=>T(e,t)),k.copyVal=(e,t)=>k.setValue(e,k.getValue(t)),k.setAttrInput=(e,t,s)=>k.setAttr(k.getInput(e),t,s),k.setAttrInputs=(e,t,s)=>k.apply(e,r,e=>e.setAttribute(t,s)),k.setReadonly=(e,t)=>k.apply(e,r,e=>{e.readOnly=t}),k.setDisabled=(e,t)=>k.apply(e,r,e=>{e.disabled=t}),k.delAttrInput=(e,t)=>k.delAttr(k.getInput(e),t),k.delAttrInputs=(e,t)=>k.apply(e,r,e=>e.removeAttribute(t)),k.getOptText=e=>(e=k.getInput(e))&&k.getText(e.options[e.selectedIndex]),k.swapAttr=(e,t,s)=>k.apply(e,r,e=>{e.setAttribute(s,e.getAttribute(t)),e.removeAttribute(t)}),k.setInput=(e,t,s)=>{e=k.getInput(e);return e&&(H(e,L,0,s),T(e,t)),k},k.setFocus=e=>k.focus(sb.isstr(e)?k.find(e,r):ab.find(k.inputs(e),I)),k.autofocus=e=>k.focus(ab.find(e||r,I)),k.autofocus().reverse(r,e=>{var t=k.get(d,e.parentNode);k.empty(t)||k.show(t).addClass(e,h.classInputError).focus(e)}),k.onChangeForm=(e,t)=>S(k.getForm(e),L,t),k.onSubmitForm=(e,t)=>S(k.getForm(e),"submit",t),k.beforeResetForm=(e,t)=>S(k.getForm(e),"reset",t),k.afterResetForm=(e,s)=>S(k.getForm(e),"reset",(e,t)=>setTimeout(()=>s(e,t),1)),k.onBlurInput=(e,t)=>S(k.getInput(e),"blur",t),k.onChangeInput=(e,t)=>S(k.getInput(e),L,t),k.onChangeInputs=(e,t)=>F(e,r,L,t),k.onChangeSelect=(e,s)=>k.apply(e,r,(e,t)=>{s(e),H(e,L,t,s)}),k.onChangeFile=(e,n)=>{const a=new FileReader,i=k.getInput(e);return S(i,L,e=>{let t=0,s=i.files[t];const r=()=>a.readAsBinaryString(s);a.onload=e=>{n(i,s,e.target.result,t),(s=i.files[++t])&&r()},s?r():n(i)})},k.setRangeDate=(t,s)=>k.onBlurInput(t,e=>k.setAttrInput(s,"min",e.value)).onBlurInput(s,e=>k.setAttrInput(t,"max",e.value)),k.getCheckRows=e=>k.checks(k.getTable(e)),k.getCheckedRows=e=>k.checked(k.getTable(e)),k.onTable=(e,t,s)=>S(k.getTable(e),t,s),k.onFindRow=(e,t)=>k.onTable(e,"find",t),k.onRemoveRow=(e,t)=>k.onTable(e,"remove",t),k.onChangeTable=(e,t)=>k.onTable(e,L,t),k.onChangeTables=(e,t)=>F(e,s,L,t),k.onRenderTable=(e,t)=>k.onTable(e,"render",t),k.afterRenderTable=(e,t)=>k.onTable(e,"rendered",t),k.onRenderTables=(e,t)=>F(e,s,"render",t),k.onPaginationTable=(e,t)=>k.onTable(e,"pagination",t),k.tfoot=function(e,t,s){return(e=k.getTable(e))?f(e,t,s):k},k.table=function(e,t,s,r){return(e=k.getTable(e))?b(e,t,s,r):k},k.selectRow=function(e,t,s,r,n){return l(e,s,r,t[n=nb.range(n,0,t.length-1)],n)},k.createRow=(e,t,s,r)=>l(e,t,s,r,-1),k.removeRow=(e,t,s,r)=>v(k.getTable(e),t,s,r),k.repaginate=function(e,t,s,r){return s.start=0,k.table(e,t,s,r)},k.updateTable=function(e,t,s,r){return(e=k.getTable(e))&&(delete e.dataset.sortBy,b(e,t,s,r)),k},k.clearTable=function(e,t,s,r){return t.splice(0),s.index=s.start=0,k.updateTable(e,t,s,r)},k.renderTables=k.tables=k.list,k.renderRows=k.renderTable=k.table,k.renderTfoot=k.tFoot=k.tfoot,k.startPagination=k.repaginate,ab.each(s,t=>{const s=k.getAll(".sort",t.tHead);function r(e){k.removeClass(s,"sort-asc sort-desc").addClass(s,"sort-none").toggle(e,"sort-none sort-"+t.dataset.sortDir)}t.dataset.sortDir&&r(k.find("a[href='#"+t.dataset.sortBy+"']",s)),k.click(s,e=>{t.dataset.sortDir=k.hasClass(e,"sort-asc")?"desc":"asc",t.dataset.sortBy=e.getAttribute("href").substring(1),k.trigger(t,"sort-"+t.dataset.sortBy).trigger(t,"sort"),r(e)}),m(t)}),k.eachInput(g,t=>{const s=k.getInputs(g+"-"+t.id);k.checkval(t,s,+t.value).click(t,e=>(t.value=k.check(s,t.checked).integer(s),!0)).click(s,e=>k.checkval(t,s,k.integer(s)))}).eachInput(u,t=>{const s=k.getInputs(u+"-"+t.id);k.click(t,e=>k.check(s,t.checked)).click(s,e=>(t.checked=ab.every(s,e=>e.checked),!0))}),c.style.position="absolute",c.style.left="-9999px",document.body.prepend(c)})}
function GraphBox(){const a=[];this.graph=function(n,i){return i=Object.assign({id:0,level:0,childnodes:[]},i),a.slice(0),pkName=i.pk||"id",fkName=i.fk||"parent",fnGroup=i.onGroup||fnTrue,i.data=n.filter(e=>!e[fkName]),i.data.forEach(e=>{!function n(i,e,t){var r;-1<a.indexOf(t)||(a.push(t),(r=newNode(e,i.filter(e=>e[fkName]==t),t))&&r.data.forEach(e=>{n(i,r,e[pkName])}))}(n,i,e[pkName])}),i},this.bfs=function(t,r){a.slice(0),a.push(t.id);for(var e=[t];0<e.length;){let i=e.shift();e=i.childnodes.filter((e,n)=>{return a.indexOf(e.id)<0&&r(t,i,e,n)?a.push(e.id):0}).concat(e)}return t},this.findVertex=function(e,n){return a.slice(0),function n(i,t,r){if(-1<a.indexOf(t.id))return null;a.push(t.id);for(let e=0;!d&&e<t.childnodes.length;e++)var f=t.childnodes[e],d=r(i,t,f,e)?f:n(i,f,r);return d}(e,e,n)}}
function I18nBox(){const r=this,s=new Map,a=new Map,i="msgError",o={en:{lang:"en",none:"",errForm:"Form validation failed",errRequired:"Required field!",errMinlength8:"The minimum required length is 8 characters",errMaxlength:"Max length exceded",errNif:"Wrong ID format",errCorreo:"Wrong Mail format",errDate:"Wrong date format",errDateLe:"Date must be less or equals than current",errDateGe:"Date must be greater or equals than current",errDateGt:"Date must be greater than current",errNumber:"Wrong number format",errGt0:"Price must be great than 0.00 &euro;",errRegex:"Wrong format",errReclave:"Passwords typed do not match",errRange:"Value out of allowed range",errRefCircular:"Circular reference",saveOk:"Element saved successfully!",removeSolicitud:"Are you sure to delete this request?",remove:"Are you sure to delete this element?",removeAll:"Are you sure to delete all elements?",removeOk:"Element removed successfully!",msgFirmar:"Do you really want to sign this request?",msgIntegrar:"Do you really want to write this request in UXXI-EC?",msgRechazar:"Do you really want to reject this request?",cancel:"Are you sure to cancel element?",cancelOk:"Element canceled successfully!",unlink:"Are you sure to unlink those elements?",unlinkOk:"Elements unlinked successfully!",linkOk:"Elements linked successfully!",closeText:"close",prevText:"prev",nextText:"next",currentText:"current",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],dateFormat:"yy-mm-dd",firstDay:0,toDate:dt.enDate,isoDate:dt.isoEnDate,isoDateTime:dt.isoEnDateTime,fmtDate:dt.fmtEnDate,acDate:dt.acEnDate,toTime:dt.toTime,minTime:dt.minTime,isoTime:dt.isoTime,acTime:dt.acTime,toInt:nb.toInt,isoInt:nb.enIsoInt,fmtInt:nb.enFmtInt,toFloat:nb.enFloat,isoFmt:nb.isoFloatToEnFmt,isoFloat:nb.enIsoFloat,fmtFloat:nb.enFmtFloat,fmtBool:nb.enBool,val:sb.enVal},es:{lang:"es",none:"",errForm:"Error al validar los campos del formulario",errRequired:"¡Campo obligatorio!",errMinlength8:"La longitud mínima requerida es de 8 caracteres",errMaxlength:"Longitud máxima excedida",errNif:"Formato de NIF / CIF incorrecto",errCorreo:"Formato de E-Mail incorrecto",errDate:"Formato de fecha incorrecto",errDateLe:"La fecha debe ser menor o igual a la actual",errDateGe:"La fecha debe ser mayor o igual a la actual",errDateGt:"La fecha debe ser mayor a la actual",errNumber:"Valor no numérico",errGt0:"El importe debe ser mayor de 0,00 &euro;",errRegex:"Formato incorrecto",errReclave:"Las claves introducidas no coinciden",errRange:"Valor fuera del rango permitido",errRefCircular:"Referencia circular",saveOk:"Registro guardado correctamente",remove:"¿Confirma que desea eliminar este registro?",removeSolicitud:"¿Confirma que desea eliminar esta solicitud?",removeAll:"¿Confirma que desea eliminar todos los elementos?",removeOk:"Registro eliminado correctamente.",msgFirmar:"¿Confirma que desea firmar esta solicitud?",msgIntegrar:"¿Confirma que desea integrar en UXII-EC esta solicitud?",msgRechazar:"¿Confirma que desea rechazar esta solicitud?",cancel:"¿Confirma que desea cancelar este registro?",cancelOk:"Elemento cancelado correctamente.",unlink:"¿Confirma que desea desasociar estos registros?",unlinkOk:"Registros desasociados correctamente",linkOk:"Registros asociados correctamente.",closeText:"cerrar",prevText:"prev.",nextText:"sig.",currentText:"hoy",monthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],monthNamesShort:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],dayNames:["Domingo","Lunes","Martes","Miércoles","Jueves","Viernes","Sábado"],dayNamesShort:["Dom","Lun","Mar","Mié","Juv","Vie","Sáb"],dayNamesMin:["Do","Lu","Ma","Mi","Ju","Vi","Sa"],dateFormat:"dd/mm/yy",firstDay:1,toDate:dt.esDate,isoDate:dt.isoEsDate,isoDateTime:dt.isoEsDateTime,fmtDate:dt.fmtEsDate,acDate:dt.acEsDate,toTime:dt.toTime,minTime:dt.minTime,isoTime:dt.isoTime,acTime:dt.acTime,toInt:nb.toInt,isoInt:nb.esIsoInt,fmtInt:nb.esFmtInt,toFloat:nb.esFloat,isoFmt:nb.isoFloatToEsFmt,isoFloat:nb.esIsoFloat,fmtFloat:nb.esFmtFloat,fmtBool:nb.esBool,val:sb.val}};let n=o.es;this.getLangs=()=>o,this.getCurrent=()=>n,this.setCurrent=e=>(n=o[e]||n,r),this.getLang=e=>o[e]||o[e&&e.substr(0,2)]||n,this.setLang=(e,t)=>(o[e]=t,r),this.addLang=(e,t)=>r.setLang(e,Object.assign(o[e]||{},t)),this.addLangs=e=>{for(const t in e)r.addLang(t,e[t]);return r},this.loadLang=e=>(n=r.getLang(e),r),this.getI18n=r.getLang,this.setI18n=r.setLang,this.getModule=(e,t)=>t?o[e][t]:o[e],this.setModule=(e,t,a)=>(o[e]=o[e]||{},o[e][t]=a,r),this.addModule=(e,t,a)=>(o[e]=o[e]||{},o[e][t]=Object.assign(o[e][t]||{},o[t],a),r),this.loadModule=(e,t)=>(t=t||n.lang,n=o[e][t]||o[t]||n,r),this.get=e=>n[e],this.tr=e=>n[e]||e,this.set=(e,t)=>(n[e]=t,r),this.msg=(e,t,a)=>sb.format(t,r.tr(e),a),this.format=(e,t)=>sb.format(n,e,t),this.toInt=e=>n.toInt(e),this.isoInt=e=>n.isoInt(e),this.fmtInt=e=>n.fmtInt(e),this.isoFmt=e=>n.isoFmt(e),this.toFloat=e=>n.toFloat(e),this.isoFloat1=e=>n.isoFloat(e,1),this.isoFloat=e=>n.isoFloat(e),this.isoFloat3=e=>n.isoFloat(e,3),this.fmtFloat1=e=>n.fmtFloat(e,1),this.fmtFloat=e=>n.fmtFloat(e),this.fmtFloat3=e=>n.fmtFloat(e,3),this.toDate=e=>n.toDate(e),this.isoDate=e=>n.isoDate(e),this.fmtDate=e=>n.fmtDate(e),this.acDate=e=>n.acDate(e),this.toTime=e=>n.toTime(e),this.minTime=e=>n.minTime(e),this.isoTime=e=>n.isoTime(e),this.fmtMinTime=e=>dt.fmtMinTime(e),this.fmtTime=e=>dt.fmtTime(e),this.acTime=e=>n.acTime(e),this.fmtBool=e=>n.fmtBool(e),this.confirm=e=>confirm(r.tr(e)),this.val=(e,t)=>n.val(e,t),this.arrval=function(e,t){e=n[e];return e&&e[t]||"-"},this.getMsgs=()=>a,this.getMsg=e=>a.get(e),this.setMsg=(e,t)=>(a.set(e,t),r),this.setOk=e=>r.setMsg("msgOk",r.tr(e)),this.setInfo=e=>r.setMsg("msgInfo",r.tr(e)),this.setWarn=e=>r.setMsg("msgWarn",r.tr(e)),this.getError=e=>a.get(e||i),this.setError=(e,t,a)=>r.setMsg(i,r.tr(e)).setMsg(t,r.tr(a)),this.getNumMsgs=()=>a.size,this.getData=e=>e?s.get(e):s,this.toData=()=>Object.fromEntries(s),this.toMsgs=()=>Object.fromEntries(a),this.reset=()=>(s.clear(),a.clear(),r),this.start=(e,t)=>r.reset().setI18n(e,t),this.valid=function(e,t,a,i){return sb.isset(t)?(s.set(e,t),!0):(r.setError(a,e,i),!1)},this.isOk=()=>!a.has(i),this.isError=e=>a.has(e||i),this.required=(e,t,a)=>r.valid(e,valid.required(t),a,"errRequired"),this.size10=(e,t,a,i)=>r.valid(e,valid.size10(t),a,i??"errMaxlength"),this.size50=(e,t,a,i)=>r.valid(e,valid.size50(t),a,i??"errMaxlength"),this.size200=(e,t,a,i)=>r.valid(e,valid.size200(t),a,i??"errMaxlength"),this.size300=(e,t,a,i)=>r.valid(e,valid.size300(t),a,i??"errMaxlength"),this.text10=(e,t,a,i)=>r.valid(e,valid.text10(t),a,i??"errMaxlength"),this.text50=(e,t,a,i)=>r.valid(e,valid.text50(t),a,i??"errMaxlength"),this.text200=(e,t,a,i)=>r.valid(e,valid.text200(t),a,i??"errMaxlength"),this.text300=(e,t,a,i)=>r.valid(e,valid.text300(t),a,i??"errMaxlength"),this.text=(e,t,a,i)=>r.valid(e,valid.text(t),a,i??"errMaxlength"),this.intval=(e,t,a,i)=>r.valid(e,valid.intval(t),a,i??"errRange"),this.intval3=(e,t,a,i)=>r.valid(e,valid.intval3(t),a,i??"errRange"),this.iGt0=(e,t,a,i)=>r.valid(e,valid.gt0(n.toInt(t)),a,i??"errNumber"),this.gt0=(e,t,a,i)=>r.valid(e,valid.gt0(n.toFloat(t)),a,i??"errGt0"),this.regex=(e,t,a,i)=>r.valid(e,valid.regex(t),a,i??"errRegex"),this.login=(e,t,a,i)=>r.valid(e,valid.login(t),a,i??"errRegex"),this.digits=(e,t,a,i)=>r.valid(e,valid.digits(t),a,i??"errNumber"),this.idlist=(e,t,a,i)=>r.valid(e,valid.idlist(t),a,i??"errRegex"),this.email=(e,t,a,i)=>r.valid(e,valid.email(t),a,i??"errCorreo"),this.isDate=(e,t,a,i)=>r.valid(e,valid.date(t),a,i??"errDate"),this.past=(e,t,a,i)=>r.valid(e,valid.past(t),a,i??"errDateLe"),this.leToday=(e,t,a,i)=>r.valid(e,valid.leToday(t),a,i??"errDateGe"),this.future=(e,t,a,i)=>r.valid(e,valid.future(t),a,i??"errDateGt"),this.geToday=(e,t,a,i)=>r.valid(e,valid.geToday(t),a,i??"errDateGe"),this.dni=(e,t,a,i)=>r.valid(e,valid.dni(t),a,i??"errNif"),this.cif=(e,t,a,i)=>r.valid(e,valid.cif(t),a,i??"errNif"),this.nie=(e,t,a,i)=>r.valid(e,valid.nie(t),a,i??"errNif"),this.idES=(e,t,a,i)=>r.valid(e,valid.idES(t),a,i??"errNif"),this.user=(e,t,a,i)=>r.valid(e,valid.email(t)||valid.idES(t),a,i??"errRegex"),this.iban=(e,t,a,i)=>r.valid(e,valid.iban(t),a,i??"errRegex"),this.swift=(e,t,a,i)=>r.valid(e,valid.swift(t),a,i??"errRegex"),this.creditCardNumber=(e,t,a,i)=>r.valid(e,valid.creditCardNumber(t),a,i??"errRegex")}
function NumberBox(){const i=this,e="0",a=".",n=",",l=t=>null!=t,h=t=>t.replace(/\D+/g,""),r=t=>h(t).replace(/^0+(\d+)/,"$1"),u=t=>"-"==t.charAt(0)?"-":"";function m(t,s){let n=t.length,o=2<n?t.substring(n-3,n):t;for(n-=3;3<n;n-=3)o=t.substring(n-3,n)+s+o;return 0<n?t.substring(0,n)+s+o:o}const o=(t,s,n)=>s<=t&&t<=n;function F(t,s){var n=u(t),t=r(t);return t?n+m(t,s):null}function f(t,s,n,o,i){o=isNaN(o)?2:o;var a=u(t),i=t.lastIndexOf(i),l=0<i?t.substr(0,i):t;return(l=0==i?e:r(l))?(t=i<0?e:t.substr(i+1,o),a+m(l,s)+n+(i<0?e.repeat(o):t.padEnd(o,e))):null}this.between=(t,s,n)=>o(t,s??t,n=n??t),this.in=(t,s,n)=>!t||i.between(t,s,n),this.range=(t,s,n)=>Math.min(Math.max(t,s),n),this.min=(t,s)=>i.range(t,s||0,t),this.max=(t,s)=>i.range(t,0,s),this.dec=(t,s)=>i.min(t-1,s),this.inc=(t,s)=>i.max(t+1,s),this.mask=(t,s)=>t>>s&1,this.round=function(t,s){return s=l(s)?s:2,+(Math.round(t+"e"+s)+"e-"+s)},this.eq2=(t,s)=>l(t)&&i.round(t)==i.round(s),this.eq3=(t,s)=>l(t)&&i.round(t,3)==i.round(s,3),this.eq01=(t,s)=>o(t-s,-.01,.01),this.lt0=t=>l(t)&&t<0,this.le0=t=>l(t)&&t<=0,this.gt0=t=>l(t)&&0<t,this.multicmp=t=>t.map(n=>(t,s)=>i.cmp(t[n],s[n])),this.cmp=function(t,s){return l(t)&&l(s)?t-s:l(t)?-1:1},this.rand=(t,s)=>Math.random()*((s||1e9)-t)+t,this.randInt=(t,s)=>Math.floor(i.rand(t||0,s)),this.toInt=function(t){return!t||(t=parseInt(u(t)+h(t)),isNaN(t))?null:t},this.isoInt=(t,s)=>l(t)?F(""+t,s):null,this.enIsoInt=t=>i.isoInt(t,n),this.esIsoInt=t=>i.isoInt(t,a),this.fmtInt=(t,s)=>t&&F(t,s),this.enFmtInt=t=>i.fmtInt(t,n),this.esFmtInt=t=>i.fmtInt(t,a),this.intval=t=>parseInt(t)||0,this.toFloat=function(t,s){var n,o;return!t||(n=u(t),o=(s=t.lastIndexOf(s))<0?t:t.substr(0,s),t=s<0?"":a+t.substr(s+1),s=parseFloat(n+h(o)+t),isNaN(s))?null:s},this.enFloat=t=>i.toFloat(t,a),this.esFloat=t=>i.toFloat(t,n),this.isoFloat=(t,s,n,o)=>l(t)?f(""+i.round(t,o),s,n,o,a):null,this.enIsoFloat=(t,s)=>i.isoFloat(t,n,a,s),this.esIsoFloat=(t,s)=>i.isoFloat(t,a,n,s),this.fmtFloat=(t,s,n,o)=>t&&f(t,s,n,o,n),this.enFmtFloat=(t,s)=>i.fmtFloat(t,n,a,s),this.isoFloatToEnFmt=i.enFmtFloat,this.esFmtFloat=(t,s)=>i.fmtFloat(t,a,n,s),this.isoFloatToEsFmt=(t,s)=>t&&f(t,a,n,s,a),this.floatval=t=>parseFloat(t)||0,this.boolval=t=>t&&"false"!==t&&"0"!==t,this.enBool=t=>i.boolval(t)?"Yes":"No",this.esBool=t=>i.boolval(t)?"Sí":"No"}
function StringBox(){const o=this,u="",s=/"|'|&|<|>|\\/g,i={'"':"&#34;","'":"&#39;","&":"&#38;","<":"&#60;",">":"&#62;","\\":"&#92;"},n="àáâãäåāăąÀÁÂÃÄÅĀĂĄÆßèéêëēĕėęěÈÉĒĔĖĘĚìíîïìĩīĭÌÍÎÏÌĨĪĬòóôõöōŏőøÒÓÔÕÖŌŎŐØùúûüũūŭůÙÚÛÜŨŪŬŮçÇñÑþÐŔŕÿÝ",h="aaaaaaaaaAAAAAAAAAABeeeeeeeeeEEEEEEEiiiiiiiiIIIIIIIIoooooooooOOOOOOOOOuuuuuuuuUUUUUUUUcCnNdDRryY",e=(new Date).toISOString();function r(s){var i=c(s);let e=s||u;for(let t=0;t<i;t++){var r=n.indexOf(s.charAt(t));e=r<0?e:e.replaceAt(h.charAt(r),t)}return e}const a=t=>r(t).toLowerCase(),p=t=>null!=t;const g=(t,s)=>a(t).indexOf(a(s)),l=t=>t.replace(/\W+/g,u),c=t=>t?t.length:0,b=(String.prototype.insert=function(t,s){return this.substring(0,s)+t+this.substring(s)},String.prototype.replaceAt=function(t,s){return this.substring(0,s)+t+this.substring(s+t.length)},String.prototype.wrap=function(t,s,i){var e;return!t||(t=(e=g(this,t))+t.length,e<0)?this:this.substring(0,e)+(s||"<u><b>")+this.substring(e,t)+(i||"</b></u>")+this.substring(t)},String.prototype.remove=function(t,s){return this.substring(0,t)+this.substring(t+s)},String.prototype.format=function(t){return this.replace(/@(\w+);/g,t)},String.prototype.render=function(e,r){const n=(r=r||{}).empty||u,h=r.getValue||o.val;var t=r.onFinish||((t,s)=>t?s:u);let a=0;var s=this.format((t,s)=>{var i=r[s],i=i?i(e[s],e):h(e,s);return a+=p(i)?1:0,i??n});return t(a,s)},this.isset=p,this.isstr=t=>"string"==typeof t||t instanceof String,this.size=c,this.trLower=a,this.trUpper=t=>r(t).toUpperCase(),this.lower=t=>t&&t.toLowerCase(t),this.upper=t=>t&&t.toUpperCase(t),this.substr=(t,s,i)=>t&&t.substr(s,i),this.substring=(t,s,i)=>t&&t.substring(s,i),this.indexOf=(t,s)=>t?t.indexOf(s):-1,this.lastIndexOf=(t,s)=>t?t.lastIndexOf(s):-1,this.prevIndexOf=(t,s,i)=>t?t.substr(0,i).lastIndexOf(s):-1,this.starts=(t,s)=>t&&t.startsWith(s),this.ends=(t,s)=>t&&t.endsWith(s),this.prefix=(t,s)=>o.starts(t,s)?t:s+t,this.suffix=(t,s)=>o.ends(t,s)?t:t+s,this.trunc=(t,s)=>c(t)>s?t.substr(0,s).trim()+"...":t,this.trim=t=>t&&t.trim(),this.escape=t=>t&&t.replace(s,t=>i[t]),this.unescape=t=>t&&t.replace(/&#(\d+);/g,(t,s)=>String.fromCharCode(s)),this.iwrap=(t,s,i,e)=>t&&t.wrap(s,i,e),this.rand=t=>Math.random().toString(36).substr(2,t||8),this.lopd=t=>t&&"***"+t.substr(3,4)+"**",this.test=(t,s)=>t&&s.test(t)?t:null,this.split=(t,s)=>t?t.trim().split(s):[],this.match=(t,s)=>t?t.trim().match(s):[],this.lastId=t=>+o.match(t,/\d+$/).pop(),this.chunk=(t,s)=>o.match(t,new RegExp(".{1,"+s+"}","g")),this.slices=function(s,i){var e=[],r=c(s),n=0;for(let t=0;n<r&&t<i.length;t++){var h=i[t];e.push(s.substr(n,h)),n+=h}return n<r&&e.push(s.substr(n)),e},t=>t.substring(0,10)),d=t=>t.substring(8,10)+"/"+t.substring(5,7)+"/"+t.substring(0,4),f=t=>t.substring(11,19);this.sysdate=()=>e,this.toDate=t=>t?new Date(t):null,this.isDate=t=>/^\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d[\.\d{1,3}]?$/.test(t),this.enDate=t=>t&&b(t),this.esDate=t=>t&&d(t),this.minTime=t=>o.substring(t,11,16),this.isoTime=t=>t&&f(t),this.isoEnDateTime=t=>t&&b(t)+" "+f(t),this.isoEsDateTime=t=>t&&d(t)+" "+f(t),this.diffDate=(t,s)=>Date.parse(t)-Date.parse(s),this.toIsoDate=(t,s)=>t+"T"+o.toIsoTime(s)+".0",this.toIsoTime=t=>{var s=c(t);return 0==s?"00:00:00":s<6?t+":00":t},this.inYear=(t,s)=>o.substring(t,0,4)==o.substring(s,0,4),this.inMonth=(t,s)=>o.substring(t,0,7)==o.substring(s,0,7),this.inDay=(t,s)=>o.substring(t,0,10)==o.substring(s,0,10),this.inHour=(t,s)=>o.substring(t,0,13)==o.substring(s,0,13),this.startDay=t=>t&&b(t)+"T00:00:00.0",this.endDay=t=>t&&b(t)+"T23:59:59.999",this.getDate=t=>+o.substring(t,8,10),this.getHours=t=>+o.substring(t,14,16),this.geToday=t=>o.inDay(t,e)||t>e,this.future=t=>t>e,this.past=t=>t<e,this.minify=t=>t&&t.trim().replace(/\s+/g," "),this.toWord=t=>t&&l(t),this.toUpperWord=t=>t&&l(t).toUpperCase(),this.lines=t=>o.split(t,/[\n\r]+/),this.words=t=>o.split(t,/\s+/),this.between=function(t,s,i){return i=i||t,(s=s||t)<=t&&t<=i},this.cmp=function(t,s){return p(t)&&p(s)?t<s?-1:s<t?1:0:p(t)?-1:1},this.cmpBy=(t,s,i)=>o.cmp(t[i],s[i]),this.eq=(t,s)=>a(t)==a(s),this.ilike=(t,s)=>-1<g(t,s),this.olike=(s,t,i)=>t.some(t=>o.ilike(s[t],i)),this.alike=(s,i,t)=>o.words(t).some(t=>o.olike(s,i,t)),this.multilike=(s,i,t)=>t.every(t=>o.ilike(s[t],i[t])),this.multicmp=t=>t.map(i=>(t,s)=>o.cmp(t[i],s[i])),this.in=(t,s,i)=>!t||o.between(t,s,i),this.val=(t,s)=>t[s],this.enVal=(t,s)=>t[s+"_en"]||t[s],this.format=(t,s,i)=>s.render(t,i),this.render=(t,s,i)=>s.render(t,i),this.entries=function(t,s,i){var e=(i=i||{}).getValue||o.val;let r=u;for(const h in t){var n=i[h],n=n?n(t[h],t):e(t,h);r+=s.replace("@key;",h).replace("@value;",n)}return r}}
function TreeBox(){const u=this;var o,a,d;function c(){return!0}function l(n,r){return n.push(r),r}function f(n,r,t){t={id:t,data:r,childnodes:[]};return t.level=n.level+1,d(n,t)?l(n.childnodes,t):null}this.preorder=function(n,r,t){return function r(t,e,i,o){var a=e.childnodes.length;for(let n=0;n<a;n++){var d=e.childnodes[n];i(t,e,d,n)&&r(t,d,i,o),n=o(t,e,d,n)?n:a}return u}(n,n,r,t||c)},this.resume=function(r,n){d=n||c;var t,e=r.length,i=[];0<e&&(t=l(i,r[0]));for(let n=1;n<e;n++){var o=r[n];d(t,o,n,i)&&(t=l(i,o))}return i},this.group=function(n,r,t){return t=Object.assign({id:0,level:0,childnodes:[]},t),d=t.onGroup||c,(t.data=n).forEach(function(e,n){var i=t;r.forEach(function(r,n){var t=e[r];i=i.childnodes.find(n=>n.id==t)||f(i,i.data.filter(n=>n[r]==t),t)||i})}),t},this.tree=function(r,t){return t=Object.assign({id:0,level:0,childnodes:[]},t),o=t.pk||"id",a=t.fk||"parent",d=t.onGroup||c,t.data=r.filter(n=>!n[a]),t.data.forEach(n=>function r(t,n,e){var i=f(n,t.filter(n=>n[a]==e),e);return i&&i.data.forEach(n=>r(t,i,n[o])),i}(r,t,n[o])),t}}
const ab=new ArrayBox,dt=new DateBox,nb=new NumberBox,sb=new StringBox,valid=new ValidatorBox,i18n=new I18nBox,dom=new DomBox,npLatin=i18n.toFloat,nfLatin=i18n.isoFloat,dpLatin=i18n.toDate,dfLatin=i18n.isoDate,fnFirmar=()=>i18n.confirm("msgFirmar")&&loading(),fnIntegrar=()=>i18n.confirm("msgIntegrar")&&loading(),fnRemove=()=>i18n.confirm("removeSolicitud")&&loading(),handleMessages=(n,e,o)=>{unloading(),dom.showAlerts(ab.parse(o.msgs))},handleReport=(n,e,o)=>{unloading(),dom.showAlerts(ab.parse(o.msgs)).redir(o.url)},fnRechazar=()=>dom.closeAlerts().required("#rechazo","Debe indicar un motivo para el rechazo de la solicitud.").isOk()&&i18n.confirm("msgRechazar");let _search=!1;function handleJson(){}function fnFalse(){return!1}function fnAcSearch(){return _search}function fnAcChange(n){_search=8==n.keyCode||sb.between(n.keyCode,46,111)||sb.between(n.keyCode,160,223)}function fnAcFilter(n,e,o){return n&&n.filter(n=>sb.olike(n,e,o)).slice(0,8)}function fnAcRender(o,i){o.autocomplete("instance")._renderItem=(n,e)=>$("<li></li>").append("<div>"+sb.iwrap(i(e),o.val())+"</div>").appendTo(n)}function fnAcLoad(n,e,o){return!$(n).val(o).siblings("[type=hidden]").first().val(e)}function fnSelectItem(n,e){return fnAcLoad(this,e.item.value,e.item.label)}function fnAcReset(){this.value||fnAcLoad(this,"","")}function fnSourceItems(n,i){loading(),window.handleJson=function(n,e,o){i(ab.parse(o?.data)||[]),unloading()},fnAcRender(this.element,n=>n.label),this.element.siblings("[id^='find-']").click()}function fnAutocomplete(i,r,t,n){loading(),window.handleJson=function(n,e,o){o=ab.parse(o?.data)||[];ab.multisort(o,sb.multicmp(r)),t(fnAcFilter(o,r,i.val())),unloading()},fnAcRender(i,n),i.siblings("[id^='find-']").click()}dom.toggleInfo=n=>(n.querySelectorAll("a[href='#toggle']").forEach(n=>{const o=sb.split(n.dataset.toggle," "),e=e=>{o.forEach(n=>e.classList.toggle(n))};n.onclick=()=>dom.toggleLink(n).eachChild(n,"i",e)}),dom),dom.addError=dom.setError=dom.setInputError,dom.required=(n,e)=>dom.setError(n,e,null,i18n.required),dom.login=(n,e,o)=>dom.setError(n,e,o,i18n.login),dom.email=(n,e,o)=>dom.setError(n,e,o,i18n.email),dom.user=(n,e,o)=>dom.setError(n,e,o,i18n.user),dom.intval=(n,e,o)=>dom.setError(n,e,o,i18n.intval),dom.gt0=(n,e,o)=>dom.setError(n,e,o,i18n.gt0),dom.fk=(n,e,o)=>dom.setError(n,e,o,i18n.fk),dom.past=(n,e,o)=>dom.setError(n,e,o,i18n.past),dom.leToday=(n,e,o)=>dom.setError(n,e,o,i18n.leToday),dom.geToday=(n,e,o)=>dom.setError(n,e,o,i18n.geToday);
function ValidatorBox(){const n=this,s=/"|'|&|<|>|\\/g,e={'"':"&#34;","'":"&#39;","&":"&#38;","<":"&#60;",">":"&#62;","\\":"&#92;"},i=/^[1-9]\d*$/,a=/^\d+(,\d+)*$/,r=/\w+[^\s@]+@[^\s@]+\.[^\s@]+/,u=/^\d{4}-[01]\d-[0-3]\d/,l=/[0-2]\d:[0-5]\d:[0-5]\d[\.\d{1,3}]?$/,h=/^\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d[\.\d{1,3}]?$/,b=/^[\w#@&°!§%;:=\^\/\(\)\?\*\+\~\.\,\-\$]{8,}$/;const o=/^[A-Z]{6,6}[A-Z2-9][A-NP-Z0-9]([A-Z0-9]{3,3}){0,1}$/;const d=/^(\d{8})([A-Z])$/,c=/^([ABCDEFGHJKLMNPQRSUVW])(\d{7})([0-9A-J])$/,g=/^[XYZ]\d{7,8}[A-Z]$/;const A=sb.toUpperWord;function B(t,s,e){return t=n.escape(t),nb.between(sb.size(t),s,e)?t:null}this.range=(t,s,e)=>nb.between(+t,s,e)?t:null,this.gt0=t=>n.range(t,1e-4,1e9),this.intval=t=>n.range(nb.intval(t),1,9),this.intval3=t=>n.range(nb.intval(t),1,3),this.intval5=t=>n.range(nb.intval(t),1,5),this.size=function(t,s,e){return t=sb.trim(t),nb.between(sb.size(t),s,e)?t:null},this.required=t=>n.size(t,1,1e3),this.size10=t=>n.size(t,0,10),this.size50=t=>n.size(t,0,50),this.size200=t=>n.size(t,0,200),this.size300=t=>n.size(t,0,300),this.unescape=t=>t?t.replace(/&#(\d+);/g,(t,s)=>String.fromCharCode(s)):null,this.escape=t=>t?t.trim().replace(s,t=>e[t]):null,this.text10=t=>B(t,0,10),this.text50=t=>B(t,0,50),this.text200=t=>B(t,0,200),this.text300=t=>B(t,0,300),this.text=t=>B(t,0,1e3),this.regex=(t,s)=>sb.test(sb.trim(s),t),this.date=t=>n.regex(u,t),this.time=t=>n.regex(l,t),this.isoDateTime=t=>n.regex(h,t),this.login=t=>n.regex(b,t),this.digits=t=>n.regex(i,t),this.idlist=t=>n.regex(a,t),this.swift=t=>n.regex(o,t),this.email=function(t){return(t=n.regex(r,t))&&t.toLowerCase()};const I=(new Date).toISOString().substring(0,19),f=I.substring(0,10),C=(t,s)=>sb.size(t)==sb.size(s);function E(t){return"TRWAGMYFPDXBNJZSQVHLCKE".charAt(parseInt(t,10)%23)==t.charAt(8)?t:null}this.past=t=>C(t,f)&&t<f?t:null,this.dtPast=t=>C(t,I)&&t<I?t:null,this.leToday=t=>C(t,f)&&t<=f?t:null,this.future=t=>C(t,f)&&t>f?t:null,this.dtFuture=t=>C(t,I)&&t>I?t:null,this.geToday=t=>C(t,f)&&t>=f?t:null,this.dni=function(t){return(t=sb.test(A(t),d))&&E(t)},this.cif=function(t){if(!(t=sb.test(A(t),c)))return null;for(var s=t.match(c),e=s[1],n=s[2],s=s[3],i=0,a=0;a<n.length;a++){var r=parseInt(n[a],10);i+=r=a%2==0?(r*=2)<10?r:parseInt(r/10)+r%10:r}var u=0!==(i%=10)?10-i:i,l="JABCDEFGHI".substr(u,1);return(e.match(/[ABEH]/)?s==u:!e.match(/[KPQS]/)&&s==u||s==l)?t:null},this.nie=function(t){var s;return(t=sb.test(A(t),g))?E(("X"==(s=t.charAt(0))?0:"Y"==s?1:"Z"==s?2:s)+t.substr(1)):null},this.idES=function(t){return n.dni(t)||n.cif(t)||n.nie(t)},this.iban=function(t){var s=(t=A(t))&&t.match(/^([A-Z]{2})(\d{2})([A-Z\d]+)$/);if(!s||sb.size(t)!=={AD:24,AE:23,AT:20,AZ:28,BA:20,BE:16,BG:22,BH:22,BR:29,CH:21,CR:22,CY:28,CZ:24,DE:22,DK:18,DO:28,EE:20,ES:24,FI:18,FO:18,FR:27,GB:22,GI:23,GL:18,GR:27,GT:28,HR:21,HU:28,IE:22,IL:23,IS:26,IT:27,JO:30,KW:30,KZ:20,LB:28,LI:21,LT:20,LU:20,LV:21,MC:27,MD:24,ME:22,MK:19,MR:27,MT:31,MU:30,NL:18,NO:15,PK:24,PL:28,PS:29,PT:25,QA:29,RO:24,RS:22,SA:24,SE:24,SI:19,SK:24,SM:27,TN:24,TR:26,AL:28,BY:28,EG:29,GE:22,IQ:23,LC:32,SC:31,ST:25,SV:28,TL:23,UA:29,VA:22,VG:24,XK:20}[s[1]])return null;var e=(s[3]+s[1]+s[2]).replace(/[A-Z]/g,t=>t.charCodeAt(0)-55).toString();let n=e.slice(0,2);for(let t=2;t<e.length;t+=7){var i=n+e.substring(t,t+7);n=parseInt(i,10)%97}return 1===n?t:null};const S={2080:"Abanca",1544:"Andbank España","0182":"BBVA",9e3:"Banco de España","0186":"Banco Mediolanum","0081":"Banco Sabadell","0049":"Banco Santander","0128":"Bankinter","0065":"Barclays Bank","0058":"BNP Paribas España",2100:"Caixabank","0122":"Citibank España","0154":"Credit Agricole","0019":"Deutsche Bank","0239":"Evo Banco","0162":"HSBC Bank",2085:"Ibercaja Banco",1465:"ING",1e3:"Instituto de crédito oficial",2095:"Kutxabank","0073":"Openbank",2103:"Unicaja Banco",3058:"Cajamar",3085:"Caja Rural",3146:"Novanca","0238":"Banco Pastor","0487":"Banco Mare Nostrum",2090:"Caja de Ahorros Mediterraneo","0030":"Banco Español de Crédito","0146":"Citibank"};this.getEntidades=()=>S,this.getIban1=t=>sb.substr(t,0,4),this.getIban2=t=>sb.substr(t,4,4),this.getEntidad=t=>S[n.getIban2(t)],this.getIban3=t=>sb.substr(t,8,4),this.getOficina=t=>sb.substr(t,8,4),this.getDC=t=>sb.substr(t,12,2),this.getIban4=t=>sb.substr(t,12,4),this.getIban5=t=>sb.substr(t,16,4),this.getIban6=t=>sb.substr(t,20,4),this.getIban7=t=>sb.substr(t,24,4),this.getIban8=t=>sb.substr(t,28,4),this.creditCardNumber=function(e){if(e=A(e),16!=sb.size(e))return null;let n=0,i=!1;for(let s=15;0<=s;s--){let t=+e[s];i&&(t=(t*=2)-(9<t?9:0)),n+=t,i=!i}return n%10==0?e:null},this.generatePassword=function(t,s){return s=s||"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_#@&°!§%;:=^/()?*+~.,-$",Array.apply(null,Array(t||10)).map(()=>s.charAt(Math.random()*s.length)).join("")},this.testPassword=function(t){var s=0;return s=(s=(s=(s=(s+=/[A-Z]+/.test(t)?1:0)+(/[a-z]+/.test(t)?1:0))+(/[0-9]+/.test(t)?1:0))+(/[\W]+/.test(t)?1:0))+(2<s&&8<sb.size(t))}}