import coll from"./Collection.js";import i18n from"../i18n/langs.js";const HIDE_CLASS="hide",FADE_IN="fadeIn",FADE_OUT="fadeOut",SLIDE_IN="slideIn",SLIDE_OUT="slideOut",fnHide=t=>t.classList.add(HIDE_CLASS),fnShow=t=>t.classList.remove(HIDE_CLASS),fnVisible=t=>t.offsetWidth||t.offsetHeight||t.getClientRects().length;function fnAnimate(t,e,o){return t.classList.remove(HIDE_CLASS,o),t.classList.add(e),t}HTMLCollection.prototype.map=Array.prototype.map,HTMLCollection.prototype.find=Array.prototype.find,HTMLCollection.prototype.filter=Array.prototype.filter,HTMLCollection.prototype.forEach=Array.prototype.forEach,HTMLCollection.prototype.eachPrev=Array.prototype.eachPrev,HTMLCollection.prototype.findIndex=Array.prototype.findIndex,HTMLCollection.prototype.findOne=function(e){return this.find(t=>t.matches(e))},HTMLCollection.prototype.query=function(e){return this.filter(t=>t.matches(e))},HTMLCollection.prototype.render=function(o){this.forEach((t,e)=>t.render(o,e,this.length))},HTMLCollection.prototype.text=function(e){this.forEach(t=>{t.innerHTML=e})},HTMLCollection.prototype.setClick=function(e){this.forEach(t=>t.setClick(e))},HTMLCollection.prototype.hide=function(){this.forEach(fnHide)},HTMLCollection.prototype.show=function(){this.forEach(fnShow)},HTMLCollection.prototype.toggle=function(e,o){e=e||HIDE_CLASS,this.forEach(t=>t.classList.toggle(e,o))},HTMLCollection.prototype.mask=function(o,i){i||(i=HIDE_CLASS,o=~o),this.forEach((t,e)=>t.toggle(i,o>>e&1))},NodeList.prototype.map=Array.prototype.map,NodeList.prototype.find=Array.prototype.find,NodeList.prototype.filter=Array.prototype.filter,NodeList.prototype.eachPrev=Array.prototype.eachPrev,NodeList.prototype.findOne=HTMLCollection.prototype.findOne,NodeList.prototype.query=HTMLCollection.prototype.query,NodeList.prototype.render=HTMLCollection.prototype.render,NodeList.prototype.text=HTMLCollection.prototype.text,NodeList.prototype.setClick=HTMLCollection.prototype.setClick,NodeList.prototype.hide=HTMLCollection.prototype.hide,NodeList.prototype.show=HTMLCollection.prototype.show,NodeList.prototype.toggle=HTMLCollection.prototype.toggle,NodeList.prototype.mask=HTMLCollection.prototype.mask,HTMLElement.prototype.setMsg=function(t){return this.innerHTML=i18n.get(t),this},HTMLElement.prototype.show=function(){return fnShow(this),this},HTMLElement.prototype.hide=function(){return fnHide(this),this},HTMLElement.prototype.toggle=function(t,e){return this.classList.toggle(t||HIDE_CLASS,e),this},HTMLElement.prototype.setClick=function(e){return this.addEventListener("click",t=>e(t,this)),this},HTMLElement.prototype.setVisible=function(t){return t?this.show():this.hide()},HTMLElement.prototype.isHidden=function(){return this.classList.contains(HIDE_CLASS)},HTMLElement.prototype.isVisible=function(t){return fnVisible(this)&&(!t||this.matches(t))},HTMLElement.prototype.render=function(t,e,o){return this.dataset.template=this.dataset.template||this.innerHTML,this.innerHTML=i18n.render(this.dataset.template,t,e,o),this},HTMLElement.prototype.setDisabled=function(t){return this.classList.toggle("disabled",this.toggleAttribute("disabled",t)),this},HTMLElement.prototype.setReadonly=function(t){return["file","checkbox","radio","range"].includes(this.type)?this.setDisabled(t):(this.classList.toggle("readonly",this.toggleAttribute("readonly",t)),this)},HTMLElement.prototype.fadeIn=function(){return fnAnimate(this,FADE_IN,FADE_OUT)},HTMLElement.prototype.fadeOut=function(){return fnAnimate(this,FADE_OUT,FADE_IN)},HTMLElement.prototype.slideIn=function(){return fnAnimate(this,SLIDE_IN,SLIDE_OUT)},HTMLElement.prototype.slideOut=function(){return fnAnimate(this,SLIDE_OUT,SLIDE_IN)},coll.ready=t=>document.addEventListener("DOMContentLoaded",t),coll.ready(i18n.setLanguage);export default coll;