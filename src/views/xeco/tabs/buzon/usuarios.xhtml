<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
		xmlns:h="http://java.sun.com/jsf/html"
		xmlns:p="http://primefaces.org/ui" 
		xmlns:ui="http://java.sun.com/jsf/facelets"
		xmlns:f="http://java.sun.com/jsf/core"
		xmlns:c="http://java.sun.com/jsp/jstl/core">

    <div id="tab-10" class="tab-content">
		<h:form id="xeco-users" prependId="false" method="post">
        <div class="card-xeco">
            <h2>Gestión de permisos</h2>
            <div id="msg-org" class="notice notice-info">@oCod; - @oDesc;</div>

            <div class="ui-blocks">
				<label class="ui-block-xl autocomplete">
					<div class="label required">Usuario:</div>
                    <i class="fas fa-search ui-input-icon left"></i>
					<input type="search" id="ac-usuarios" name="usuario" class="ui-input ui-autocomplete" tabindex="1" />
					<input type="hidden" id="nif-usuario" styleClass="ui-input" />
					<ul role="list" class="results"></ul>
					<div class="ui-errtip"></div> 
					<p:remoteCommand name="rcFindUsers" action="#{buzon.findUsuarios()}" oncomplete="loadItems(xhr, status, args)" />
				</label>
                <div class="ui-block-btn">
                    <a id="add-user" href="#" class="btn btn-green" tabindex="2" title="Asocia un nuevo habilitado a la organica"><i class="far fa-plus btn-icon-left"></i>Añadir</a>
                </div>
            </div>
        </div>

        <p:remoteCommand name="rcAddUser" action="#{buzon.addUsuario()}" oncomplete="updateUsuarios(xhr, status, args)" />
        <p:remoteCommand name="rcRemoveUser" action="#{buzon.remove()}" oncomplete="updateUsuarios(xhr, status, args);"/>
        <p:remoteCommand name="rcToggle" action="#{buzon.toggle()}" oncomplete="reloadAll(xhr, status, args)" />
        </h:form>

        <table id="usuarios" class="tb-xeco">
            <thead>
                <tr>
                    <th>NIF</th><th>Nombre</th><th>Rol</th><th>Acciones</th>
                </tr>
            </thead>
            <tbody></tbody>
            <tfoot>
                <tr><td colspan="99">Usuarios: @size;</td></tr>
            </tfoot>
        </table>

        <div class="navbar">
            <a href="#tab-0" class="btn btn-info"><i class="fas fa-caret-left"></i></a>
            <a href="#save-users" class="btn btn-green"><i class="far fa-save btn-icon-left"></i>Guardar</a>
        </div>
    </div>
</html>
