<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
		xmlns:h="http://java.sun.com/jsf/html"
		xmlns:p="http://primefaces.org/ui" 
		xmlns:ui="http://java.sun.com/jsf/facelets"
		xmlns:f="http://java.sun.com/jsf/core"
		xmlns:c="http://java.sun.com/jsp/jstl/core">

	<h:form id="xeco-uxxi" prependId="false" onsubmit="loading();">
		<h2>Consulta de Formación de Expediente<hr/></h2>
		<p class="notice notice-info load-data">@codigo;: @memo;</p>
		<div class="ui-blocks">
			<label class="ui-block">
				<div class="label">Ejercicio:</div>
				<h:selectOneMenu id="ej-uxxi" value="#{presto.ejUxxi}" styleClass="ui-input ui-select" tabindex="1">
					<f:selectItems value="#{uae.ejercicios}" />
				</h:selectOneMenu>
			</label>
			<label class="ui-block-xl autocomplete">
				<div class="label required">Operación UXXI-EC:</div>
				<p:remoteCommand name="rcFindUxxi" action="#{presto.findUxxi()}" oncomplete="loadItems(xhr, status, args)" />
				<input type="search" id="uxxi" name="uxxi" class="ui-input ui-autocomplete" tabindex="2" autocomplete="off" />
				<input type="text" id="idUxxi" name="idUxxi" class="ui-number hide" />
				<ul role="list" class="results"></ul>
				<div class="errtip"></div>
			</label>
			<div class="ui-block-btn">
				<a id="add-uxxi" href="#" class="btn btn-green" tabindex="5" title="Asocia la operación a la solicitud"><i class="far fa-plus btn-icon-left"></i> Añadir</a>
			</div>
		</div>

		<h:inputText id="docs-json" value="#{presto.operaciones}" styleClass="hide" />
		<table id="docs-uxxi">
			<thead>
				<tr>
					<th>Operación</th>
					<th>Doc.</th>
					<th>Importe</th>
					<th>F. Creación</th>
					<th>Descripción</th>
					<th>Acciones</th>
				</tr>
			</thead>
			<tbody></tbody>
			<tfoot>
				<tr></tr>
			</tfoot>
		</table>

		<div class="navbar">
			<a href="#tab-2" class="btn btn-primary tab-action" title="#{msg['tit.btn.volver.ini']}" tabindex="13">
				<i class="fas fa-caret-left btn-icon-left"></i>#{msg['lbl.btn.volver']}</a>
			<p:commandLink action="#{presto.ejecutar()}" styleClass="btn btn-green" onclick="saveUxxiec();" oncomplete="showAlerts(xhr, status, args)" 
				tabindex="14" title="Guarda los cambios realizados, sin notificar a los responsables de la solicitud">
				<i class="far fa-save btn-icon-left"></i>Guardar</p:commandLink>
			<p:commandLink action="#{presto.notificar()}" styleClass="btn btn-green show-ejecutable" onclick="saveUxxiec();" oncomplete="showAlerts(xhr, status, args)" 
				tabindex="15" title="Notifica a los responsables vía e-mail, que la solicitud ya esta mecanizada en UXXI-EC">
				<i class="fal fa-paper-plane btn-icon-left"></i>Notificar</p:commandLink>
			<a href="#tab-11" class="table-action btn btn-error" tabindex="16" title="#{msg['tit.btn.rechazar']}">
				<i class="fas fa-times-circle btn-icon-left"></i>#{msg['lbl.btn.rechazar']}</a>
		</div>
	</h:form>
</html>
